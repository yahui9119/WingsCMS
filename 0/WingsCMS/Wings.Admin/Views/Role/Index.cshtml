@using Wings.DataObjects;
@model RoleDTOList
<div class="page-content">
    <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
    <!-- BEGIN PAGE HEADER-->
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <h3 class="page-title">角色管理
            </h3>
            <ul class="page-breadcrumb breadcrumb">

                <li>
                    <i class="fa fa-home"></i>
                    主页
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>组织结构
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>角色管理
                </li>
            </ul>
            <!-- END PAGE TITLE & BREADCRUMB-->
        </div>
    </div>
    <!-- END PAGE HEADER-->
    <!-- BEGIN PAGE CONTENT-->
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet box light-grey">
                <div class="portlet-title">
                    <div class="caption"><i class="fa fa-globe"></i>角色表</div>
                    <div class="tools">
                        <a href="javascript:;" class="collapse"></a>
                        <a href="javascript:;" class="remove"></a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="btn-group">
                            @Html.ActionLink("添加", "Add", new { }, new  { @class="btn green  roleadd" })
                             @Html.ActionLink("删除", "Delete", new {  }, new { @class="btn red roledelete"})
                        </div>

                    </div>
                    <table class="table table-striped table-bordered table-hover" id="roledatatable">
                        <thead>
                            <tr>
                                <th class="table-checkbox">
                                    <input type="checkbox" class="group-checkable" data-set="#roledatatable .checkboxes" /></th>
                                <th>角色名</th>
                                <th>描述</th>
                                <th>创建时间</th>
                                <th>当前状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr class="odd gradeX">
                                    <td>
                                        <input type="checkbox" class="checkboxes" value="1" /></td>
                                    <td>@item.Name</td>
                                    <td>@item.Description</td>
                                    <td class="center">@item.CreateDate.ToLocalTime()</td>
                                    <td class="center">
                                        @{
                                var statusicon = item.Status == Status.Active ? "label-success" : "label-default";
                                         
                                            <span class="label label-sm @statusicon ">
                                                @item.Status
                                            </span>
                                        }
                                    </td>
                                    <td>
                                        <div class="btn-group">
                                            @Html.ActionLink("修改", "Edit", new { ID = item.ID }, new { @class="btn yellow roleedit"})
                                         
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->
        </div>
    </div>
    <!-- END PAGE CONTENT-->
</div>
@section JS{
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script type="text/javascript" src="Content/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" src="Content/plugins/data-tables/jquery.dataTables.js"></script>
    <script type="text/javascript" src="Content/plugins/data-tables/DT_bootstrap.js"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <script>
        jQuery(document).ready(function () {
            //begin datatable
            if (!jQuery().dataTable) {
                return;
            }
            // begin first table
            $('#roledatatable').dataTable({
                "aoColumns": [
                  { "bSortable": false },
                  null,
                  { "bSortable": false },
                  null,
                  { "bSortable": false },
                  { "bSortable": false }
                ],
                "aLengthMenu": [
                    [5, 15, 20, -1],
                    [5, 15, 20, "All"] // change per page values here
                ],
                // set the initial value
                "iDisplayLength": 5,
                "sPaginationType": "bootstrap",
                "oLanguage": {
                    "sLengthMenu": "每页显示 _MENU_",
                    "oPaginate": {
                        "sPrevious": "上一页",
                        "sNext": "下一页"
                    }
                },
                "aoColumnDefs": [{
                    'bSortable': false,
                    'aTargets': [0]
                }
                ]
            });

            jQuery('#roledatatable .group-checkable').change(function () {
                var set = jQuery(this).attr("data-set");
                var checked = jQuery(this).is(":checked");
                jQuery(set).each(function () {
                    if (checked) {
                        $(this).attr("checked", true);
                    } else {
                        $(this).attr("checked", false);
                    }
                    $(this).parents('tr').toggleClass("active");
                });
                jQuery.uniform.update(set);

            });

            jQuery('#roledatatable tbody tr .checkboxes').change(function () {
                $(this).parents('tr').toggleClass("active");
            });

            jQuery('#roledatatable .dataTables_filter input').addClass("form-control input-medium"); // modify table search input
            jQuery('#roledatatable .dataTables_length select').addClass("form-control input-xsmall"); // modify table per page dropdown

            //end datatable
            $('.roleedit').click(function () {
                return false;
            })
            $('.roledelete').click(function () {
                return false;
            })
            $('.roleadd').click(function () {
                return false;
            })
        });
    </script>
}